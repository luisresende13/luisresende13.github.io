(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{110:function(e,t,n){e.exports=n.p+"static/media/wallpaper.9987c866.jpg"},166:function(e,t,n){"use strict";n.d(t,"a",(function(){return nt}));var r=n(18),o=n.n(r),s=n(19),a=n.n(s),i=n(14),c=n.n(i),l=n(21),u=n.n(l),d=n(22),h=n.n(d),g=n(15),p=n.n(g),f=n(0),b=n(709),y=n(710),m=n(4),E=n.n(m),S=n(5),j=n(13),O=n(51),v=n(25),x=n(40),T=n(33),w=n(8),I=n.n(w),C=n(11),k=n.n(C),P=n(9),R=n(41),A=n(106),D={mainView:{flex:1},postButton:{position:"absolute",height:60,width:60,borderRadius:30,bottom:"2%",alignSelf:"center",backgroundColor:"rgba(0,0,0,1)",justifyContent:"center"},postButtonLabel:{alignSelf:"center"},scrollView:{flex:1,borderWidth:1},section:{width:350,paddingVertical:"16%",borderBottomWidth:1,borderColor:"rgba(155,155,155,0.3)",alignSelf:"center"},sectionTitle:{paddingVertical:7.5,fontSize:18,color:"white",fontWeight:"400"},card:{marginTop:"5%",paddingVertical:5,paddingHorizontal:10,borderRadius:20,backgroundColor:"rgba(0,0,0,0.2)"},cardRow:{flexDirection:"row",paddingVertical:5,alignItems:"center"},moodBadge:{backgroundColor:"green",borderRadius:30,paddingVertical:6,width:130,fontSize:15,textAlign:"center"},emotionBadge:{backgroundColor:"aliceblue",borderRadius:18,paddingVertical:6,paddingHorizontal:12.5,marginRight:6,fontSize:14,textAlign:"center"},textBadge:{backgroundColor:"aliceblue",borderRadius:17,paddingTop:5,paddingBottom:8,paddingHorizontal:11,width:"100%",fontSize:15,lineHeight:22,textAlign:"left",textAlignVertical:"top"},text:{fontSize:14,color:"white"},spaceBetween:{justifyContent:"space-between"},icon:{paddingHorizontal:12},entryIcon:{paddingRight:0,borderWidth:1},editButtonsView:{flexDirection:"row",height:50,paddingBottom:5,alignItems:"flex-end",justifyContent:"space-between"},editButton:{height:34,width:102,borderWidth:1,borderColor:"aliceblue",borderRadius:17,alignItems:"center",justifyContent:"center"},editButtonLabel:{fontSize:15,fontWeight:"400",color:"white"},msgBox:{position:"absolute",alignSelf:"center",bottom:110,width:300,height:36,justifyContent:"center",backgroundColor:"rgb(30,30,30)",borderWidth:1,borderColor:"rgb(40,40,40)"},msg:{textAlign:"center",color:"white"}},U=n(3);function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){I()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function B(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var o=p()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h()(this,n)}}var L="web"==P.a.OS?"https://morning-journey-78874.herokuapp.com/":"";var G={"Horr\xedvel":"#ff3333",Mal:"#0099cc",Regular:"#add8e6",Bem:"#ffff33","\xd3timo":"#00cc00"},z={Jan:"01",Feb:"02",Mar:"03",Apr:"04",May:"05",Jun:"06",Jul:"07",Ago:"08",Sep:"09",Oct:"10",Nov:"11",Dec:"12"};function H(e){var t,n=e.entry;return Object(U.jsxs)(S.a,{style:[D.cardRow,D.spaceBetween],children:[Object(U.jsxs)(S.a,{style:[{flexDirection:"row",alignItems:"center"}],children:[Object(U.jsx)(j.a,{style:[D.moodBadge,{backgroundColor:G[n.mood]}],children:n.mood}),n.star?Object(U.jsx)(S.a,{style:{height:30,width:42,alignItems:"flex-end",justifyContent:"center"},children:Object(U.jsx)(T.Icon,{name:"star",fill:"gold",width:28,height:28,style:{}})}):Object(U.jsx)(U.Fragment,{}),n.weather?Object(U.jsx)(S.a,{style:{height:30,width:50,alignItems:"flex-end",justifyContent:"center"},children:Object(U.jsx)(R.a,{source:{uri:(t=n.weather.weather.icon,"android"===P.a.OS?"http://openweathermap.org/img/wn/"+t+"@2x.png":"web"===P.a.OS?"https://openweathermap.org/img/wn/"+t+"@2x.png":void 0)},style:{width:40,height:40}})}):Object(U.jsx)(U.Fragment,{}),n.weather?Object(U.jsx)(S.a,{style:{height:30,width:40,alignItems:"flex-end",justifyContent:"center"},children:Object(U.jsxs)(j.a,{style:{fontSize:14,fontWeight:"500",color:"#fffd"},children:[" ",n.weather.main.temp.toString().slice(0,2)+"\xb0C"," "]})}):Object(U.jsx)(U.Fragment,{})]}),Object(U.jsxs)(S.a,{style:[D.cardRow],children:[Object(U.jsx)(T.Icon,{name:"edit",height:18,width:18,fill:"rgba(255,255,255,0.75)",style:{marginRight:6}}),Object(U.jsx)(j.a,{style:D.text,children:n.startTime.slice(0,5)})]})]})}function V(e){var t=e.entry,n=Object(f.useState)(1),r=k()(n,2),o=r[0],s=r[1];return t.address?Object(U.jsx)(S.a,{style:D.cardRow,children:Object(U.jsxs)(j.a,{numberOfLines:o,onPress:function(){s(o?0:1)},style:D.text,children:[Object(U.jsx)(T.Icon,{name:"pin",height:17,width:17,fill:"rgba(255,255,255,0.75)",style:{position:"relative",marginRight:5,top:2}}),t.address]})}):Object(U.jsx)(U.Fragment,{})}function F(e){var t=e.entry;return t.emotions.length>0?Object(U.jsx)(S.a,{style:[D.cardRow,{flexWrap:"wrap",justifyContent:"flex-start",paddingTop:2,PaddingBottom:0}],children:t.emotions.map((function(e,t){return e.name&&(e=e.name),Object(U.jsx)(S.a,{style:{paddingVertical:5,paddingHorizontal:2},children:Object(U.jsx)(j.a,{style:[D.emotionBadge],children:e})},"emotion-"+e)}))}):Object(U.jsx)(U.Fragment,{})}function W(e){var t=e.entry;return t.jornal?Object(U.jsx)(S.a,{style:D.cardRow,children:Object(U.jsxs)(j.a,{style:D.textBadge,children:[Object(U.jsx)(T.Icon,{name:"book-open",height:20,width:20,fill:"rgba(0,0,0,0.25)",style:{position:"relative",top:4,left:1,marginRight:6}}),t.jornal]})}):Object(U.jsx)(U.Fragment,{})}function J(e){var t=e.date==function(){var e=Date().toString().split(" ");return[e[3],z[e[1]],e[2]].join("-")}(),n={user:e.user,currentEntry:{type:t?"new":"custom-date",date:e.date,entry:null},syncUserData:e.syncUserData,passUserData:e.passUserData},r={fontSize:16,color:"white",marginTop:7};return Object(U.jsxs)(v.a,{onPress:function(){return e.navigation.navigate("PostEntrance",n)},style:[D.card,{alignItems:"center",justifyContent:"center",fontSize:16,height:145}],children:[Object(U.jsx)(T.Icon,{name:"inbox",fill:"rgba(255,255,255,0.3)",width:25,height:25}),Object(U.jsx)(j.a,{style:r,children:" Nenhuma entrada encontrada. "}),Object(U.jsx)(j.a,{style:r,children:" Pressione aqui para adicionar uma a este dia! "})]})}function Y(){return Object(U.jsx)(S.a,{style:[D.card,{alignItems:"center",justifyContent:"center",height:145}],children:Object(U.jsx)(T.Icon,{name:"sync-outline",fill:"rgba(0,0,0,0.3)",width:25,height:25})})}var K=function(e){u()(n,e);var t=B(n);function n(e){var r;return o()(this,n),(r=t.call(this,e)).state={isLoading:!1},r.EntryCard=r.EntryCard.bind(c()(r)),r.EditEntryButtons=r.EditEntryButtons.bind(c()(r)),r.editUserEntry=r.editUserEntry.bind(c()(r)),r.deleteUserEntry=r.deleteUserEntry.bind(c()(r)),r}return a()(n,[{key:"componentDidMount",value:function(){var e=this;console.log('Subcomponent "UserEntryCards" did mount...'),setInterval((function(){e.updateIfPosted()}),3e3)}},{key:"updateIfPosted",value:function(){this.props.posted.status&&(console.log("JUST POSTED STATUS: POSTED. Redirecting date and syncing entries ..."),this.props.forgetPosted(),this.props.syncUserData())}},{key:"EntryCard",value:function(e){var t=e.entry;return Object(U.jsxs)(v.a,{onPress:function(){this.props.setSelectedEntryId(this.props.selectedEntryId===t._id?null:t._id)}.bind(this),style:D.card,children:[Object(U.jsx)(H,{entry:t}),Object(U.jsx)(F,{entry:t}),Object(U.jsx)(V,{entry:t}),Object(U.jsx)(W,{entry:t}),Object(U.jsx)(this.EditEntryButtons,{entryId:t._id})]})}},{key:"UserEntryCardsList",value:function(){var e=this,t=this.props.user.entries.filter((function(t){return t.date===e.props.date})).reverse();return t.length?t.map((function(t){return Object(U.jsx)(e.EntryCard,{entry:t},"entry-card-"+t.startTime)})):this.props.isUserDataSyncing?Object(U.jsx)(Y,{}):Object(U.jsx)(J,M({},this.props))}},{key:"EditEntryButtons",value:function(e){var t=this,n={Editar:this.editUserEntry,Excluir:this.deleteUserEntry},r=Object(f.useState)({Editar:!1,Excluir:!1}),o=k()(r,2),s=o[0],a=o[1];return this.props.selectedEntryId==e.entryId?Object(U.jsx)(S.a,{style:D.editButtonsView,children:["Editar","Excluir"].map((function(r){return Object(U.jsx)(v.a,{style:[D.editButton,{backgroundColor:s[r]?"Excluir"==r?"#000f":"#fff2":"#0000",borderColor:"Excluir"==r?"red":"white"}],disabled:t.state.isLoading|t.props.isUserDataSyncing,onPress:n[r],onPressIn:function(){return a(M(M({},s),{},I()({},r,!s[r])))},onPressOut:function(){return a(M(M({},s),{},I()({},r,!s[r])))},children:Object(U.jsx)(j.a,{style:[D.editButtonLabel,{color:"Excluir"==r?"red":"white"}],children:r})},"\xe8dit-"+r+"-"+e.entryId)}))}):null}},{key:"editUserEntry",value:function(){var e=this,t=this.props.user.entries.filter((function(t){return t._id==e.props.selectedEntryId}))[0],n={user:this.props.user,currentEntry:{type:"edit",date:t.date,entry:t},syncUserData:this.props.syncUserData,passUserData:this.props.passUserData};this.props.navigation.navigate("PostEntrance",n)}},{key:"deleteUserEntry",value:function(){var e,t;return E.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("DELETE USER ENTRY STATUS: Started..."),this.setState({isLoading:!0}),n.prev=2,e={ok:!1,status:999},n.next=6,E.a.awrap(fetch(L+"https://mood-tracker-server.herokuapp.com/Users/"+this.props.user.username+"/entries/"+this.props.selectedEntryId,{method:"DELETE"}));case 6:if(e=n.sent,t="Status "+e.status+", "+e.statusText,!e.ok){n.next=14;break}console.log("fetch DELETE request for user entry successful."),console.log(t),console.log("DELETE USER ENTRY STATUS: Successful."),n.next=16;break;case 14:throw console.log(new Error('"fetch" DELETE request for user entry failed. Throwing error...')),new Error(t);case 16:n.next=23;break;case 18:n.prev=18,n.t0=n.catch(2),console.log("DELETE USER ENTRY STATUS: Error captured. Printing error..."),console.log(n.t0),this.props.setAlertMsg("N\xe3o foi poss\xedvel deletar a entrada. Tente novamente.");case 23:return n.prev=23,this.setState({isLoading:!1}),this.props.setSelectedEntryId(null),console.log("Proceeding to sync user entries..."),e.ok&&this.props.syncUserData(),n.finish(23);case 29:case"end":return n.stop()}}),null,this,[[2,18,23,29]],Promise)}},{key:"render",value:function(){return this.UserEntryCardsList()}}]),n}(f.Component),q=["2021-01-01","2021-01-02","2021-01-03","2021-01-04","2021-01-05","2021-01-06","2021-01-07","2021-01-08","2021-01-09","2021-01-10","2021-01-11","2021-01-12","2021-01-13","2021-01-14","2021-01-15","2021-01-16","2021-01-17","2021-01-18","2021-01-19","2021-01-20","2021-01-21","2021-01-22","2021-01-23","2021-01-24","2021-01-25","2021-01-26","2021-01-27","2021-01-28","2021-01-29","2021-01-30","2021-01-31","2021-02-01","2021-02-02","2021-02-03","2021-02-04","2021-02-05","2021-02-06","2021-02-07","2021-02-08","2021-02-09","2021-02-10","2021-02-11","2021-02-12","2021-02-13","2021-02-14","2021-02-15","2021-02-16","2021-02-17","2021-02-18","2021-02-19","2021-02-20","2021-02-21","2021-02-22","2021-02-23","2021-02-24","2021-02-25","2021-02-26","2021-02-27","2021-02-28","2021-03-01","2021-03-02","2021-03-03","2021-03-04","2021-03-05","2021-03-06","2021-03-07","2021-03-08","2021-03-09","2021-03-10","2021-03-11","2021-03-12","2021-03-13","2021-03-14","2021-03-15","2021-03-16","2021-03-17","2021-03-18","2021-03-19","2021-03-20","2021-03-21","2021-03-22","2021-03-23","2021-03-24","2021-03-25","2021-03-26","2021-03-27","2021-03-28","2021-03-29","2021-03-30","2021-03-31","2021-04-01","2021-04-02","2021-04-03","2021-04-04","2021-04-05","2021-04-06","2021-04-07","2021-04-08","2021-04-09","2021-04-10","2021-04-11","2021-04-12","2021-04-13","2021-04-14","2021-04-15","2021-04-16","2021-04-17","2021-04-18","2021-04-19","2021-04-20","2021-04-21","2021-04-22","2021-04-23","2021-04-24","2021-04-25","2021-04-26","2021-04-27","2021-04-28","2021-04-29","2021-04-30","2021-05-01","2021-05-02","2021-05-03","2021-05-04","2021-05-05","2021-05-06","2021-05-07","2021-05-08","2021-05-09","2021-05-10","2021-05-11","2021-05-12","2021-05-13","2021-05-14","2021-05-15","2021-05-16","2021-05-17","2021-05-18","2021-05-19","2021-05-20","2021-05-21","2021-05-22","2021-05-23","2021-05-24","2021-05-25","2021-05-26","2021-05-27","2021-05-28","2021-05-29","2021-05-30","2021-05-31","2021-06-01","2021-06-02","2021-06-03","2021-06-04","2021-06-05","2021-06-06","2021-06-07","2021-06-08","2021-06-09","2021-06-10","2021-06-11","2021-06-12","2021-06-13","2021-06-14","2021-06-15","2021-06-16","2021-06-17","2021-06-18","2021-06-19","2021-06-20","2021-06-21","2021-06-22","2021-06-23","2021-06-24","2021-06-25","2021-06-26","2021-06-27","2021-06-28","2021-06-29","2021-06-30","2021-07-01","2021-07-02","2021-07-03","2021-07-04","2021-07-05","2021-07-06","2021-07-07","2021-07-08","2021-07-09","2021-07-10","2021-07-11","2021-07-12","2021-07-13","2021-07-14","2021-07-15","2021-07-16","2021-07-17","2021-07-18","2021-07-19","2021-07-20","2021-07-21","2021-07-22","2021-07-23","2021-07-24","2021-07-25","2021-07-26","2021-07-27","2021-07-28","2021-07-29","2021-07-30","2021-07-31","2021-08-01","2021-08-02","2021-08-03","2021-08-04","2021-08-05","2021-08-06","2021-08-07","2021-08-08","2021-08-09","2021-08-10","2021-08-11","2021-08-12","2021-08-13","2021-08-14","2021-08-15","2021-08-16","2021-08-17","2021-08-18","2021-08-19","2021-08-20","2021-08-21","2021-08-22","2021-08-23","2021-08-24","2021-08-25","2021-08-26","2021-08-27","2021-08-28","2021-08-29","2021-08-30","2021-08-31","2021-09-01","2021-09-02","2021-09-03","2021-09-04","2021-09-05","2021-09-06","2021-09-07","2021-09-08","2021-09-09","2021-09-10","2021-09-11","2021-09-12","2021-09-13","2021-09-14","2021-09-15","2021-09-16","2021-09-17","2021-09-18","2021-09-19","2021-09-20","2021-09-21","2021-09-22","2021-09-23","2021-09-24","2021-09-25","2021-09-26","2021-09-27","2021-09-28","2021-09-29","2021-09-30","2021-10-01","2021-10-02","2021-10-03","2021-10-04","2021-10-05","2021-10-06","2021-10-07","2021-10-08","2021-10-09","2021-10-10","2021-10-11","2021-10-12","2021-10-13","2021-10-14","2021-10-15","2021-10-16","2021-10-17","2021-10-18","2021-10-19","2021-10-20","2021-10-21","2021-10-22","2021-10-23","2021-10-24","2021-10-25","2021-10-26","2021-10-27","2021-10-28","2021-10-29","2021-10-30","2021-10-31","2021-11-01","2021-11-02","2021-11-03","2021-11-04","2021-11-05","2021-11-06","2021-11-07","2021-11-08","2021-11-09","2021-11-10","2021-11-11","2021-11-12","2021-11-13","2021-11-14","2021-11-15","2021-11-16","2021-11-17","2021-11-18","2021-11-19","2021-11-20","2021-11-21","2021-11-22","2021-11-23","2021-11-24","2021-11-25","2021-11-26","2021-11-27","2021-11-28","2021-11-29","2021-11-30","2021-12-01","2021-12-02","2021-12-03","2021-12-04","2021-12-05","2021-12-06","2021-12-07","2021-12-08","2021-12-09","2021-12-10","2021-12-11","2021-12-12","2021-12-13","2021-12-14","2021-12-15","2021-12-16","2021-12-17","2021-12-18","2021-12-19","2021-12-20","2021-12-21","2021-12-22","2021-12-23","2021-12-24","2021-12-25","2021-12-26","2021-12-27","2021-12-28","2021-12-29","2021-12-30","2021-12-31","2022-01-01","2022-01-02","2022-01-03","2022-01-04","2022-01-05","2022-01-06","2022-01-07","2022-01-08","2022-01-09","2022-01-10","2022-01-11","2022-01-12","2022-01-13","2022-01-14","2022-01-15","2022-01-16","2022-01-17","2022-01-18","2022-01-19","2022-01-20","2022-01-21","2022-01-22","2022-01-23","2022-01-24","2022-01-25","2022-01-26","2022-01-27","2022-01-28","2022-01-29","2022-01-30","2022-01-31","2022-02-01","2022-02-02","2022-02-03","2022-02-04","2022-02-05","2022-02-06","2022-02-07","2022-02-08","2022-02-09","2022-02-10","2022-02-11","2022-02-12","2022-02-13","2022-02-14","2022-02-15","2022-02-16","2022-02-17","2022-02-18","2022-02-19","2022-02-20","2022-02-21","2022-02-22","2022-02-23","2022-02-24","2022-02-25","2022-02-26","2022-02-27","2022-02-28","2022-03-01","2022-03-02","2022-03-03","2022-03-04","2022-03-05","2022-03-06","2022-03-07","2022-03-08","2022-03-09","2022-03-10","2022-03-11","2022-03-12","2022-03-13","2022-03-14","2022-03-15","2022-03-16","2022-03-17","2022-03-18","2022-03-19","2022-03-20","2022-03-21","2022-03-22","2022-03-23","2022-03-24","2022-03-25","2022-03-26","2022-03-27","2022-03-28","2022-03-29","2022-03-30","2022-03-31","2022-04-01","2022-04-02","2022-04-03","2022-04-04","2022-04-05","2022-04-06","2022-04-07","2022-04-08","2022-04-09","2022-04-10","2022-04-11","2022-04-12","2022-04-13","2022-04-14","2022-04-15","2022-04-16","2022-04-17","2022-04-18","2022-04-19","2022-04-20","2022-04-21","2022-04-22","2022-04-23","2022-04-24","2022-04-25","2022-04-26","2022-04-27","2022-04-28","2022-04-29","2022-04-30","2022-05-01","2022-05-02","2022-05-03","2022-05-04","2022-05-05","2022-05-06","2022-05-07","2022-05-08","2022-05-09","2022-05-10","2022-05-11","2022-05-12","2022-05-13","2022-05-14","2022-05-15","2022-05-16","2022-05-17","2022-05-18","2022-05-19","2022-05-20","2022-05-21","2022-05-22","2022-05-23","2022-05-24","2022-05-25","2022-05-26","2022-05-27","2022-05-28","2022-05-29","2022-05-30","2022-05-31","2022-06-01","2022-06-02","2022-06-03","2022-06-04","2022-06-05","2022-06-06","2022-06-07","2022-06-08","2022-06-09","2022-06-10","2022-06-11","2022-06-12","2022-06-13","2022-06-14","2022-06-15","2022-06-16","2022-06-17","2022-06-18","2022-06-19","2022-06-20","2022-06-21","2022-06-22","2022-06-23","2022-06-24","2022-06-25","2022-06-26","2022-06-27","2022-06-28","2022-06-29","2022-06-30"];function Q(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var o=p()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h()(this,n)}}var _={Jan:"01",Feb:"02",Mar:"03",Apr:"04",May:"05",Jun:"06",Jul:"07",Ago:"08",Sep:"09",Oct:"10",Nov:"11",Dec:"12"},$=["Jan","Feb","Mar","Apr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dec"],X=["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],Z={Mon:"Seg",Tue:"Ter",Wed:"Qua",Thu:"Qui",Fri:"Sex",Sat:"Sab",Sun:"Dom"};function ee(){var e=Date().toString().split(" ");return[e[3],_[e[1]],e[2]].join("-")}function te(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"next",n=q[q.indexOf(e)+("previous"==t?-1:1)];return n}function ne(e){var t=e.split("-"),n=te(ee(),"previous"),r=new Date(t[0],t[1],t[2]).toString().split(" ")[0],o=Z[r],s="";s=e===ee()?"Hoje, ":e===n?"Ontem, ":o+", ";for(var a=0;a<12;a++)if(_[$[a]]==t[1])return s+re(t[2])+"\xb0 "+X[a]}function re(e){return"0"==e[0]?e.slice(1,e.length):e}var oe=function(e){u()(r,e);var t=Q(r);function r(e){var n;return o()(this,r),(n=t.call(this,e)).DateNavigationButton=function(e){var t=e.next,r=e.today,o="next"==t&&r?"rgba(255,255,255,0.1)":"white";return Object(U.jsx)(v.a,{onPress:n.onNextButtonPress(t),disabled:"next"==t&r,children:Object(U.jsx)(T.Icon,{name:"next"==t?"arrow-forward":"arrow-back",width:35,height:35,fill:o})})},n.state={user:n.props.route.params.user,date:ee(),time:Date().toString().split(" ")[4],selectedDate:ee(),entriesLoading:!1,userDataSynced:!1,isUserDataSyncing:!1,alertMsg:""},n.onNextButtonPress=n.onNextButtonPress.bind(c()(n)),n.forgetPosted=n.forgetPosted.bind(c()(n)),n.setAlertMsg=n.setAlertMsg.bind(c()(n)),n.setSelectedEntryId=n.setSelectedEntryId.bind(c()(n)),n.setUserInfo=n.setUserInfo.bind(c()(n)),n.syncUserData=n.syncUserData.bind(c()(n)),n.passUserData=n.passUserData.bind(c()(n)),n}return a()(r,[{key:"componentDidMount",value:function(){console.log('"Entries" screen component did mount...'),this.props.navigation.setParams({posted:{status:!1,entry:null}})}},{key:"setSelectedEntryId",value:function(e){this.setState({selectedEntryId:e})}},{key:"onNextButtonPress",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"next";function t(){this.setState({selectedEntryId:null,selectedDate:te(this.state.selectedDate,e)})}return t.bind(this)}},{key:"forgetPosted",value:function(){this.setState({selectedEntryId:null,selectedDate:"new"==this.props.route.params.posted.entry.type?ee():this.state.selectedDate}),this.props.navigation.setParams({posted:{status:!1,entry:null}})}},{key:"setAlertMsg",value:function(e){var t=this;this.setState({alertMsg:e}),setTimeout((function(){return t.setState({alertMsg:""})}),5e3)}},{key:"alertMsg",value:function(){return Object(U.jsx)(S.a,{style:[D.msgBox,this.state.alertMsg?{}:{backgroundColor:"transparent",borderColor:"transparent"}],children:Object(U.jsx)(j.a,{style:D.msg,children:this.state.alertMsg})})}},{key:"setUserInfo",value:function(e){this.setState({user:e,userDataSynced:!0})}},{key:"passUserData",value:function(){return this.state.user}},{key:"syncUserData",value:function(){var e,t,n,r,o=this;return E.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return console.log("SYNC ENTRIES STATUS: Started..."),this.setState({isUserDataSyncing:!0}),s.prev=2,s.next=5,E.a.awrap(fetch("https://morning-journey-78874.herokuapp.com/https://mood-tracker-server.herokuapp.com/Users",{method:"GET"}));case 5:if(e=s.sent,t="Status: "+e.status+", "+e.statusText,!e.ok){s.next=18;break}return s.next=10,E.a.awrap(e.json());case 10:n=s.sent,r=n.filter((function(e){return e.email===o.state.user.email}))[0],console.log("fetch GET request for user entries successful."),console.log(t),this.setState({user:r,userDataSynced:!0}),console.log("SYNC ENTRIES STATUS: Successful."),s.next=20;break;case 18:throw console.log(new Error('"fetch" GET request for user entries failed. Throwing error...')),new Error(t);case 20:s.next=27;break;case 22:s.prev=22,s.t0=s.catch(2),console.log("SYNC ENTRIES STATUS: Error captured. Printing error..."),console.log(s.t0),this.props.setAlertMsg("N\xe3o foi poss\xedvel sincronizar as entradas. Por favor, aguarde..");case 27:return s.prev=27,this.setState({isUserDataSyncing:!1}),console.log("SYNC ENTRIES STATUS: Finished."),s.finish(27);case 31:case"end":return s.stop()}}),null,this,[[2,22,27,31]],Promise)}},{key:"render",value:function(){var e=this,t=this.state.selectedDate===ee(),r={user:this.state.user,currentEntry:{type:"new",date:ee(),entry:null},syncUserData:this.syncUserData,passUserData:this.passUserData};return Object(U.jsxs)(O.a,{source:n(110),style:[D.mainView],children:[Object(U.jsx)(x.a,{style:D.scrollView,children:Object(U.jsxs)(S.a,{style:D.section,children:[Object(U.jsxs)(S.a,{style:[D.cardRow,{justifyContent:"space-between"}],children:[Object(U.jsx)(this.DateNavigationButton,{icon:"arrow-back",next:"previous"}),Object(U.jsxs)(j.a,{style:D.sectionTitle,children:[" ","Suas entradas  \u2022  "+ne(this.state.selectedDate)," "]}),Object(U.jsx)(this.DateNavigationButton,{icon:"arrow-forward",next:"next",today:t})]}),Object(U.jsx)(K,{date:this.state.selectedDate,selectedEntryId:this.state.selectedEntryId,posted:this.props.route.params.posted,user:this.state.user,isUserDataSyncing:this.state.isUserDataSyncing,setUserInfo:this.setUserInfo,syncUserData:this.syncUserData,passUserData:this.passUserData,setSelectedEntryId:this.setSelectedEntryId,forgetPosted:this.forgetPosted,setAlertMsg:this.setAlertMsg,navigation:this.props.navigation})]})}),Object(U.jsx)(v.a,{onPress:function(){e.props.navigation.navigate("PostEntrance",r)},style:[D.postButton],children:Object(U.jsx)(T.Icon,{name:"plus-circle",width:72,height:72,fill:"white",style:D.postButtonLabel})}),this.alertMsg()]})}}]),r}(f.Component),se=n(16),ae=n.n(se),ie=n(53),ce=n(62),le=n(113),ue={login:{msgBox:{position:"absolute",bottom:"10%",width:300,alignSelf:"center",height:36,justifyContent:"center",backgroundColor:"rgb(30,30,30)",borderWidth:1,borderColor:"rgb(40,40,40)"},msg:{textAlign:"center",color:"white"}},mainView:{flex:1,marginTop:A.a.currentHeight},entrances:{marginTop:A.a.currentHeight,borderWidth:0,flex:1,justifyContent:"space-between",alignItems:"flex-start"},scrollView:{width:"100%",alignSelf:"center"},content:{flexGrow:1,paddingBottom:"0%",paddingHorizontal:"5%",alignSelf:"stretch",borderColor:"black"},section:{width:350,paddingVertical:"16%",borderBottomWidth:1,borderColor:"rgba(155,155,155,0.3)",alignSelf:"center"},contentRow:{flexDirection:"column",padding:10,marginTop:22,borderWidth:1,borderColor:"rgba(155,155,155, 0.4)",borderRadius:30,backgroundColor:"rgba(255,255,255, 0.3)"},entryTitle:{paddingVertical:3,paddingLeft:4,fontSize:19,color:"white"},entryIcon:{paddingRight:0},postButtonView:{height:60,width:60,borderRadius:30,alignSelf:"center",justifyContent:"center",alignItems:"center",backgroundColor:"white"},postButtonLabel:{fontSize:45,fontWeight:"bold"},moodButtonView:{width:65,height:65,alignItems:"center",justifyContent:"center",borderWidth:1},moodButton:{width:65,height:65,alignItems:"center",justifyContent:"center"},date:{position:"relative",left:"60%",paddingVertical:8,paddingHorizontal:10,fontSize:15,alignSelf:"center",backgroundColor:"white",borderRadius:20},jornalText:{paddingVertical:5,paddingHorizontal:12,flex:1,textAlignVertical:"top",width:"100%",borderRadius:20,color:"white",fontSize:16},saveButton:{height:50,width:"100%",borderTopLeftRadius:30,borderTopRightRadius:30,justifyContent:"center",alignItems:"center",backgroundColor:"white"},saveButtonLabel:{fontWeight:"bold",fontSize:19},card:{marginTop:"5%",paddingVertical:5,paddingHorizontal:10,borderRadius:20,backgroundColor:"rgba(0,0,0,0.2)"},cardRow:{flexDirection:"row",paddingVertical:5,alignItems:"center"},moodBadge:{backgroundColor:"green",borderRadius:30,paddingVertical:6,width:130,fontSize:16,textAlign:"center"},emotionBadge:{backgroundColor:"rgba(1,1,1,0.5)",borderRadius:30,paddingVertical:6,paddingHorizontal:12.5,fontSize:15,textAlign:"center",marginVertical:5,marginHorizontal:5},entryCardEmotionBadge:{backgroundColor:"aliceblue",borderRadius:30,paddingVertical:7,paddingHorizontal:12.5,marginRight:6,fontSize:15,textAlign:"center"},datetimeTitle:{fontSize:16,marginRight:3},editButtonsView:{flexDirection:"row",height:55,paddingVertical:5,alignItems:"flex-end",justifyContent:"space-between"},editButton:{height:34,width:102,borderWidth:1,borderColor:"aliceblue",borderRadius:19,alignItems:"center",justifyContent:"center"},editButtonLabel:{fontSize:15,fontWeight:"400",color:"white"}};function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function he(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(Object(n),!0).forEach((function(t){I()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ge(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var o=p()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h()(this,n)}}var pe="web"==P.a.OS?"https://morning-journey-78874.herokuapp.com/":"",fe=function(e){u()(n,e);var t=ge(n);function n(e){var r;return o()(this,n),(r=t.call(this,e)).state={showEditMenu:!1,showExpandMenuButton:!0,mode:"hidden",newEmotionName:"",selectedEmotionType:null,selectedEmotionEnergy:null,isLoading:!1},r.EditEmotionsButtons=r.EditEmotionsButtons.bind(c()(r)),r.EditEmotionsSection=r.EditEmotionsSection.bind(c()(r)),r.onSaveEmotionButtonPress=r.onSaveEmotionButtonPress.bind(c()(r)),r}return a()(n,[{key:"onSaveEmotionButtonPress",value:function(){var e,t,n,r,o;return E.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return this.setState({isLoading:!0}),e=this.props.user,t={name:this.state.newEmotionName,type:this.state.selectedEmotionType,energy:this.state.selectedEmotionEnergy},s.prev=3,console.log("POST EMOTION STATUS: Started..."),n={ok:!1,status:"999",statusText:"Post not fetched yet."},r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},s.next=9,E.a.awrap(fetch(pe+"https://mood-tracker-server.herokuapp.com/Users/"+e.username+"/emotions",r));case 9:if(n=s.sent,o="Status: "+n.status+", "+n.statusText,!n.ok){s.next=17;break}console.log("POST EMOTION STATUS: Successful."),console.log(o),this.setState({showEditMenu:!0,showExpandMenuButton:!0,mode:"hidden",newEmotionName:"",selectedEmotionType:null,selectedEmotionEnergy:null}),s.next=19;break;case 17:throw console.log("POST EMOTION STATUS: Failed. Throwing error..."),new Error(o);case 19:s.next=26;break;case 21:s.prev=21,s.t0=s.catch(3),this.props.setAlertMsg("Erro no servidor. Tente novamente..."),console.log("Erro capturado:"),console.log(s.t0);case 26:if(s.prev=26,console.log("POST EMOTION STATUS: Finished."),this.setState({isLoading:!1}),!n.ok){s.next=33;break}return s.next=32,E.a.awrap(this.props.syncUserData());case 32:this.props.updateUserData();case 33:return s.finish(26);case 34:case"end":return s.stop()}}),null,this,[[3,21,26,34]],Promise)}},{key:"onDeleteEmotionsButtonPress",value:function(){this.props.setDeleteMode()}},{key:"EditEmotionsSection",value:function(){var e=this,t={marginTop:0,marginTop:0,alignItems:"center"},n={color:"white",fontSize:16,alignSelf:"center",marginBottom:8},r={width:"45%",height:28,borderRadius:13.5,marginBottom:7,color:"white",alignItems:"center",justifyContent:"center"},o={height:420,marginTop:20,paddingTop:10,justifyContent:"space-evenly",borderTopWidth:1,borderTopColor:"rgba(255,255,255,0.2)"};switch(this.state.mode){case"hidden":return null;case"create":return Object(U.jsxs)(S.a,{style:o,children:[Object(U.jsx)(j.a,{style:{color:"white",fontSize:22,alignSelf:"center"},children:"Criar emo\xe7\xe3o"}),Object(U.jsxs)(S.a,{style:t,children:[Object(U.jsx)(j.a,{style:n,children:"Nome"}),Object(U.jsx)(ie.a,{placeholder:"Nome da emo\xe7\xe3o...",style:{width:"70%",height:35,borderRadius:16.5,color:"white",backgroundColor:"rgba(0,0,0,0.7)",fontSize:15,textAlign:"center"},onChangeText:function(t){return e.setState({newEmotionName:t})},value:this.state.newEmotionName})]}),Object(U.jsxs)(S.a,{style:t,children:[Object(U.jsx)(j.a,{style:n,children:"Tipo"}),["Positiva","Negativa"].map((function(t){var n=e.state.selectedEmotionType===t;return Object(U.jsx)(v.a,{onPress:function(){return e.setState({selectedEmotionType:n?null:t})},style:[r,{backgroundColor:n?"rgba(0,0,0,0.8)":"rgba(0,0,0,0.3)"}],children:Object(U.jsx)(j.a,{style:[{fontSize:15,color:"white"}],children:t})},"emotion-"+t)}))]}),Object(U.jsxs)(S.a,{style:t,children:[Object(U.jsx)(j.a,{style:n,children:"Energia"}),["Calmo(a)","Energizado(a)"].map((function(t){var n=e.state.selectedEmotionEnergy===t;return Object(U.jsx)(v.a,{onPress:function(){return e.setState({selectedEmotionEnergy:n?null:t})},style:[r,{backgroundColor:n?"rgba(0,0,0,0.8)":"rgba(0,0,0,0.3)"}],children:Object(U.jsx)(j.a,{style:[{fontSize:15,color:"white"}],children:t})},"emotion-"+t)}))]}),Object(U.jsxs)(S.a,{style:[t,{flexDirection:"row",justifyContent:"space-evenly"}],children:[Object(U.jsx)(v.a,{onPress:this.onSaveEmotionButtonPress,style:[ue.editButton,{alignSelf:"center"}],children:Object(U.jsx)(j.a,{style:ue.editButtonLabel,children:"Salvar"})}),Object(U.jsx)(v.a,{onPress:function(){return e.setState({showEditMenu:!0,showExpandMenuButton:!0,mode:"hidden"})},style:[ue.editButton,{alignSelf:"center",borderColor:"white"}],children:Object(U.jsx)(j.a,{style:[ue.editButtonLabel,{color:"white"}],children:"Cancelar"})})]})]});case"delete":return Object(U.jsxs)(S.a,{style:[o,{height:150}],children:[Object(U.jsx)(j.a,{style:{color:"white",fontSize:22,alignSelf:"center"},children:"Excluir emo\xe7\xf5es"}),Object(U.jsx)(j.a,{style:{color:"white",fontSize:16,textAlign:"center"},children:"Pressione e segure para excluir uma emo\xe7\xe3o."}),Object(U.jsx)(S.a,{style:[ue.cardRow,{justifyContent:"space-evenly"}],children:Object(U.jsx)(v.a,{onPress:function(){e.props.setDeleteMode(),e.setState({showEditMenu:!0,showExpandMenuButton:!0,mode:"hidden"})},style:[ue.editButton,{alignSelf:"center",borderColor:"white"}],children:Object(U.jsx)(j.a,{style:[ue.editButtonLabel,{color:"white"}],children:"Terminar"})})})]});default:return null}}},{key:"EditEmotionsButtons",value:function(){var e=this,t={Criar:function(){return e.setState({showEditMenu:!1,showExpandMenuButton:!1,mode:"create"})},Excluir:function(){e.setState({showEditMenu:!1,showExpandMenuButton:!1,mode:"delete"}),e.props.setDeleteMode()},Layout:function(){}},n=Object(f.useState)({Criar:!1,Excluir:!1,Layout:!1}),r=k()(n,2),o=r[0],s=r[1],a=this.state.showEditMenu,i=(this.state.showExpandMenuButton,"hidden"==this.state.mode),c=a||!i;return Object(U.jsx)(U.Fragment,{children:this.state.showExpandMenuButton?Object(U.jsxs)(S.a,{style:[ue.cardRow,{height:50,marginTop:25,paddingTop:10,justifyContent:a?"space-between":"center",borderTopWidth:1,borderTopColor:"rgba(255,255,255,0.2)"}],children:[a?["Criar","Excluir","Layout"].map((function(n){return Object(U.jsx)(v.a,{style:[ue.editButton,{backgroundColor:o[n]?"#fff2":"#0000",width:75}],disabled:e.state.isLoading,onPress:t[n],onPressIn:function(){return s(he(he({},o),{},I()({},n,!o[n])))},onPressOut:function(){return s(he(he({},o),{},I()({},n,!o[n])))},children:Object(U.jsx)(j.a,{style:[ue.editButtonLabel,{color:"white"}],children:n})},"emotion-"+n)})):null,Object(U.jsxs)(v.a,{onPress:function(){return e.setState({showEditMenu:!a})},style:{flexDirection:"row",alignItems:"center",justifyContent:"center",paddingVertical:5,width:75},children:[Object(U.jsx)(T.Icon,{name:a?"arrow-back-outline":"more-horizontal-outline",fill:"white",width:20,height:20}),Object(U.jsxs)(j.a,{style:{color:"white",fontSize:15,marginLeft:0},children:[" ",c?"menos":"mais"]})]})]}):null})}},{key:"render",value:function(){return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(this.EditEmotionsSection,{}),Object(U.jsx)(this.EditEmotionsButtons,{})]})}}]),n}(f.Component),be=n(100),ye=n(82),me={GoogleMapsJavascriptAPIkey:"AIzaSyBVWbOwPAMRyz2bS6rYHrDftVeihQ8WMCo",GoogleMapsGeocodingAPIKey:"AIzaSyB6O-DpvulBC0rom1mGy-mBcstIbPlDPHA"},Ee={KEY:"de9e6896f84109d7920528172207411a"};function Se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(n),!0).forEach((function(t){I()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Oe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var o=p()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h()(this,n)}}function ve(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return xe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xe(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}be.c(me.GoogleMapsGeocodingAPIKey);var Te="web"==P.a.OS?"https://morning-journey-78874.herokuapp.com/":"",we=(new Date).toString().split(" "),Ie=(we[2],we[1],we[3],we[4].slice(0,5),["Horr\xedvel","Mal","Regular","Bem","\xd3timo"]),Ce=["rgba(255, 51, 51, 1)","rgba(0, 153, 204, 1)","rgba(173, 216, 230, 1)","rgba(255, 255, 51, 1)","rgba(0, 204, 0, 1)"],ke=["emoticon-dead","emoticon-sad","emoticon-neutral","emoticon-happy","emoticon-excited"],Pe=["Bem & Calmo(a)","Bem & Energizado(a)","Mal & Calmo(a)","Mal & Energizado(a)"],Re=["Positiva","Negativa"],Ae=[["Al\xedvio","Calma","Conforto","Despreocupa\xe7\xe3o","Inspira\xe7\xe3o","Orgulho","Paz","Relaxamento","Satisfa\xe7\xe3o","Seguran\xe7a","Criatividade"].sort(),["Anima\xe7\xe3o","Concentra\xe7\xe3o","Desinibi\xe7\xe3o","Motiva\xe7\xe3o","Euforia"].sort(),["Depress\xe3o","Timidez","Cansa\xe7o","Tristeza","Confus\xe3o","Desanimo","Inseguran\xe7a","Solid\xe3o","T\xe9dio"].sort(),["Inquieta\xe7\xe3o","Ansiedade","Desespero","Frustra\xe7\xe3o","Insatisfa\xe7\xe3o","Irrita\xe7\xe3o","Medo","Vergonha","Preocupa\xe7\xe3o","Impaci\xeancia","Sobrecarregado(a)","Tens\xe3o"].sort()];[].concat(ae()(Ae[0]),ae()(Ae[1]),ae()(Ae[2]),ae()(Ae[3]));function De(e){for(var t,n={},r=ve(e);!(t=r()).done;){n[t.value.name]=!1}return n}var Ue=["Jan","Feb","Mar","Apr","Jun","Jul","Ago","Sep","Oct","Nov","Dec"],Ne=["01","02","03","04","05","06","07","08","09","10","11","12"],Me={"01":"Janeiro","02":"Fevereiro","03":"Mar\xe7o","04":"Abril","05":"Maio","06":"Junho","07":"Julho","08":"Agosto","09":"Setembro",10:"Outubro",11:"Novembro",12:"Dezembro"};function Be(){var e,t=Date().toString().split(" ");return[t[3],(e=t[1],Ne[Ue.indexOf(e)]),t[2]].join("-")}function Le(){return Date().toString().split(" ")[4]}function Ge(e,t){var n,r=e.split("-"),o=Me[r[1]];return("0"==(n=r[2])[0]?n.slice(1,n.length):n)+" "+o+" "+r[0]+(t?" - ":"")+t.slice(0,5)}var ze=function(e){u()(r,e);var t=Oe(r);function r(e){var n;return o()(this,r),(n=t.call(this,e)).state={user:n.props.route.params.user,date:"",startTime:"",endTime:"",createdAt:"",lastEdited:[],star:!1,selectedMood:"",emotions:[],jornalEntry:"",address:"",location:null,weather:null,selectedEntry:"Avalia\xe7\xe3o",isMoodUnmarked:!0,isSelectedEmotions:De(n.props.route.params.user.emotions),isLoading:!1,isFetchingLocationOrWeather:!1,deleteMode:!1,locationServiceEnabled:null,userCoordinates:null,loginMsg:""},n.initializeEntry=n.initializeEntry.bind(c()(n)),n.onSaveButtonPress=n.onSaveButtonPress.bind(c()(n)),n.saveButton=n.saveButton.bind(c()(n)),n.setLoginMsg=n.setLoginMsg.bind(c()(n)),n.EmotionButtons=n.EmotionButtons.bind(c()(n)),n.MoodButtons=n.MoodButtons.bind(c()(n)),n.postEntryHeader=n.postEntryHeader.bind(c()(n)),n.onEmotionButtonPress=n.onEmotionButtonPress.bind(c()(n)),n.onMoodButtonPress=n.onMoodButtonPress.bind(c()(n)),n.inputCardBody=n.inputCardBody.bind(c()(n)),n.setSelectedEntry=n.setSelectedEntry.bind(c()(n)),n.InputCard=n.InputCard.bind(c()(n)),n.JornalInput=n.JornalInput.bind(c()(n)),n.postNewEntryAsync=n.postNewEntryAsync.bind(c()(n)),n.updateUserData=n.updateUserData.bind(c()(n)),n.setDeleteMode=n.setDeleteMode.bind(c()(n)),n.deleteEmotion=n.deleteEmotion.bind(c()(n)),n.onEmotionButtonLongPress=n.onEmotionButtonLongPress.bind(c()(n)),n}return a()(r,[{key:"componentDidMount",value:function(){console.log('"PostEntryComponent" did mount.'),this.initializeEntry()}},{key:"postEntryHeader",value:function(){var e=this;return Object(U.jsxs)(S.a,{style:[ue.cardRow,{justifyContent:"space-between"}],children:[Object(U.jsx)(v.a,{onPress:function(){e.props.navigation.goBack()},style:ue.postButton,children:Object(U.jsx)(T.Icon,{name:"arrow-back",fill:"white",height:30,width:30})}),Object(U.jsxs)(S.a,{style:[ue.entryCardEmotionBadge,{flexDirection:"row",alignItems:"center"}],children:[Object(U.jsxs)(j.a,{style:ue.datetimeTitle,children:[" ",Ge(this.props.route.params.currentEntry.date,this.state.startTime)," "]}),Object(U.jsx)(T.Icon,{name:"edit",fill:"rgba(75,75,75,1)",height:20,width:20})]}),Object(U.jsx)(v.a,{onPress:function(){e.setState({star:!e.state.star})},style:ue.postButton,children:Object(U.jsx)(T.Icon,{name:this.state.star?"star":"star-outline",fill:"rgba(245,245,245,0.7)",height:30,width:30})})]})}},{key:"MoodButtons",value:function(){var e=this;return Ie.map((function(t,n){var r,o=e.state.selectedMood==t,s=e.state.isMoodUnmarked,a=Ce[n];return Object(U.jsx)(S.a,{style:ue.moodButton,children:Object(U.jsx)(le.a,{name:ke[n],size:s?52:o?57:50,color:s||o?a:(r=.5,["rgba(255, 51, 51, "+r+")","rgba(0, 153, 204, "+r+")","rgba(173, 216, 230, "+r+")","rgba(255, 255, 51, "+r+")","rgba(0, 204, 0, "+r+")"])[n],onPress:e.onMoodButtonPress(t)})},"mood "+n)}))}},{key:"onMoodButtonPress",value:function(e){function t(){this.state.selectedMood==e?this.setState({selectedMood:null,isMoodUnmarked:!0}):this.setState({selectedMood:e,isMoodUnmarked:!1})}return t=t.bind(this)}},{key:"EmotionButtons",value:function(e){var t=this;return e.map((function(e){return Object(U.jsx)(v.a,{title:e.name,onPress:t.onEmotionButtonPress(e.name),onLongPress:t.onEmotionButtonLongPress(e.name),children:Object(U.jsx)(j.a,{style:[ue.emotionBadge,{backgroundColor:t.state.isSelectedEmotions[e.name]?"lightblue":"aliceblue"}],children:e.name})},"emotion-"+e.name)}))}},{key:"onEmotionButtonPress",value:function(e){function t(){this.setState({isSelectedEmotions:je(je({},this.state.isSelectedEmotions),{},I()({},e,!this.state.isSelectedEmotions[e]))})}return t=t.bind(this)}},{key:"onEmotionButtonLongPress",value:function(e){function t(){this.state.deleteMode&&this.deleteEmotion(e)}return t=t.bind(this)}},{key:"JornalInput",value:function(){var e=this;return Object(U.jsx)(ie.a,{multiline:!0,scrollEnabled:!0,placeholder:"Escreva aqui...",placeholderTextColor:"rgba(255,255,255,0.6)",onChangeText:function(t){return e.setState({jornalEntry:t})},value:this.state.jornalEntry,style:ue.jornalText})}},{key:"inputCardBody",value:function(e,t,n){if(this.state.selectedEntry===e){if("Emo\xe7\xf5es"==e){var r=function(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"grid",r="grid"==n?[[],[],[],[]]:[[],[]],o="grid"==n?Pe:Re,s=ve(e);!(t=s()).done;){var a=t.value;"grid"==n?"Positiva"==a.type?"Calmo(a)"==a.energy?r[0]=[].concat(ae()(r[0]),[a]):"Energizado(a)"==a.energy&&(r[1]=[].concat(ae()(r[1]),[a])):"Negativa"==a.type&&("Calmo(a)"==a.energy?r[2]=[].concat(ae()(r[2]),[a]):"Energizado(a)"==a.energy&&(r[3]=[].concat(ae()(r[3]),[a]))):"type"==n&&("Positivo"==a.type?r[0]=[].concat(ae()(r[0]),[a]):"Negativo"==a.type&&(r[1]=[].concat(ae()(r[1]),[a])))}return[r,o]}(this.state.user.emotions),o=k()(r,2),s=o[0],a=o[1];return Object(U.jsxs)(U.Fragment,{children:[s.map((function(e,r){return Object(U.jsxs)(S.a,{style:{width:"100%",alignItems:"center",marginVertical:10},children:[Object(U.jsx)(j.a,{style:{fontSize:15,color:"white",marginVertical:8},children:a[r]}),Object(U.jsx)(S.a,{style:[ue.cardRow,t],children:n(e)},r)]},"emotion-group-"+r)})),Object(U.jsx)(fe,{user:this.props.route.params.user,syncUserData:this.props.route.params.syncUserData,updateUserData:this.updateUserData,deleteMode:this.state.deleteMode,setDeleteMode:this.setDeleteMode,setAlertMsg:this.setLoginMsg,isLoading:this.state.isLoading})]})}return Object(U.jsx)(S.a,{style:[ue.cardRow,t],children:n})}return Object(U.jsx)(U.Fragment,{})}},{key:"InputCard",value:function(e,t,n,r){return Object(U.jsxs)(S.a,{style:[ue.card],children:[Object(U.jsxs)(v.a,{style:ue.cardRow,onPress:this.setSelectedEntry(e),children:[Object(U.jsx)(T.Icon,{name:t,fill:"rgba(255,255,255,0.75)",height:28,width:28,style:ue.entryIcon}),Object(U.jsxs)(j.a,{style:ue.entryTitle,children:[" ",e," "]})]}),this.inputCardBody(e,n,r)]})}},{key:"setSelectedEntry",value:function(e){function t(){this.setState({selectedEntry:this.state.selectedEntry===e?null:e})}return t=t.bind(this)}},{key:"loginMsg",value:function(){return Object(U.jsx)(S.a,{style:[ue.login.msgBox,this.state.loginMsg?{}:{backgroundColor:"transparent",borderColor:"transparent"}],children:Object(U.jsx)(j.a,{style:ue.login.msg,children:this.state.loginMsg})})}},{key:"setLoginMsg",value:function(e){var t=this;this.setState({loginMsg:e}),setTimeout((function(){return t.setState({loginMsg:""})}),5e3)}},{key:"initializeEntry",value:function(){var e,t,n,r,o,s,a,i;return E.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:e=this.props.route.params.currentEntry,t=this.state.user,c.t0=e.type,c.next="new"===c.t0?5:"custom-date"===c.t0?14:"edit"===c.t0?17:23;break;case 5:return console.log("POST ENTRY STATUS: INITIATING BLANK NEW ENTRY! FETCHING LOCATION AND WEATHER DATA..."),this.setState({date:e.date,startTime:Le(),endTime:"",isFetchingLocationOrWeather:!0}),c.next=9,E.a.awrap(this.checkIfLocationEnabled());case 9:return c.next=11,E.a.awrap(this.getCurrentLocation());case 11:return c.next=13,E.a.awrap(this.fetchWeather());case 13:return c.abrupt("break",24);case 14:return console.log("POST ENTRY STATUS: INITIALIZING CUSTOM DATE ENTRY! SETTING DATE TO: "+e.date),this.setState({date:e.date,startTime:"",endTime:""}),c.abrupt("break",24);case 17:for(n=e.entry,r=n.emotions.map((function(e){return e.name})),o={},s=ve(t.emotions);!(a=s()).done;)i=a.value,o[i.name]=r.includes(i.name);return this.setState({date:n.date,startTime:n.startTime,endTime:n.endTime,createdAt:n.createdAt,lastEdited:n.lastEdited,star:n.star,selectedMood:n.mood,isSelectedEmotions:o,jornalEntry:n.jornal,address:n.address,location:n.location,weather:n.weather,isMoodUnmarked:!1}),c.abrupt("break",24);case 23:return c.abrupt("break",24);case 24:case"end":return c.stop()}}),null,this,null,Promise)}},{key:"updateUserData",value:function(){var e=this;console.log('UPDATING USER DATA IN "PostEntryComponent"...');var t=this.props.route.params.passUserData(),n=Object.keys(this.state.isSelectedEmotions),r=t.emotions.map((function(e){return e.name})),o=De(r.filter((function(e){return n.includes(e)})));n.forEach((function(t){r.includes(t)&&(o[t]=e.state.isSelectedEmotions[t])})),this.setState({user:t,isSelectedEmotions:o})}},{key:"saveButton",value:function(){var e=this.state.isFetchingLocationOrWeather|this.state.isLoading;return Object(U.jsx)(v.a,{onPress:this.onSaveButtonPress,disabled:e,style:ue.saveButton,children:e?Object(U.jsx)(ce.a,{size:"small",color:"#000000"}):Object(U.jsx)(j.a,{style:ue.saveButtonLabel,children:" Salvar "})})}},{key:"onSaveButtonPress",value:function(){var e=this;if(this.state.selectedMood)try{var t,n,r=this.props.route.params.currentEntry,o=Le();switch(r.type){case"new":n=o,t=o;break;case"custom-date":n=this.state.endTime,t=o;break;case"edit":n=this.state.endTime,t=this.state.createdAt}var s={date:this.state.date,startTime:this.state.startTime,endTime:n,createdAt:t,lastEdited:[].concat(ae()(this.state.lastEdited),[{date:Be(),time:o}]),star:this.state.star,mood:this.state.selectedMood,emotions:this.state.user.emotions.filter((function(t){return e.state.isSelectedEmotions[t.name]})),jornal:this.state.jornalEntry,address:this.state.address,location:this.state.location,weather:this.state.weather};this.postNewEntryAsync(s)}catch(a){this.setLoginMsg("N\xe3o foi poss\xedvel postar a entrada. Tente novamente..."),console.log("Error when attempting to post user entry. Logging error..."),console.log(a)}else this.setLoginMsg("Necess\xe1rio adicionar uma avalia\xe7\xe3o."),this.setState({selectedEntry:"Avalia\xe7\xe3o"})}},{key:"postNewEntryAsync",value:function(e){var t,n,r,o,s,a;return E.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return this.setState({isLoading:!0}),t=this.props.route.params.user,n=this.props.route.params.currentEntry,r="edit"===n.type,i.prev=4,console.log("POST ENTRY STATUS: Started..."),o={ok:!1,status:"999",statusText:"Post not fetched yet."},s={method:r?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)},i.next=10,E.a.awrap(fetch(Te+"https://mood-tracker-server.herokuapp.com/Users/"+t.username+"/entries"+(r?"/"+n.entry._id:""),s));case 10:if(o=i.sent,a="Status: "+o.status+", "+o.statusText,!o.ok){i.next=17;break}console.log("POST ENTRY STATUS: Successful."),console.log(a),i.next=19;break;case 17:throw console.log("POST ENTRY STATUS: Failed. Throwing error..."),new Error(a);case 19:i.next=25;break;case 21:i.prev=21,i.t0=i.catch(4),console.log("Erro capturado:"),console.log(i.t0);case 25:return i.prev=25,console.log("POST ENTRY STATUS: Finished."),this.setState({isLoading:!1}),o.ok&&this.props.navigation.navigate("Entrances",{posted:{status:!0,entry:n}}),i.finish(25);case 30:case"end":return i.stop()}}),null,this,[[4,21,25,30]],Promise)}},{key:"setDeleteMode",value:function(){this.setState({deleteMode:!this.state.deleteMode})}},{key:"deleteEmotion",value:function(e){var t,n,r,o;return E.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return this.setState({isLoading:!0}),t=this.state.user,s.prev=2,console.log("DELETE EMOTION STATUS: Started..."),n={ok:!1,status:"999",statusText:"Post not fetched yet."},r={method:"DELETE",headers:{"Content-Type":"application/json"}},s.next=8,E.a.awrap(fetch(Te+"https://mood-tracker-server.herokuapp.com/Users/"+t.username+"/emotions/"+e,r));case 8:if(n=s.sent,o="Status: "+n.status+", "+n.statusText,!n.ok){s.next=15;break}console.log("DELETE EMOTION STATUS: Successful."),console.log(o),s.next=17;break;case 15:throw console.log("DELETE EMOTION STATUS: Failed. Throwing error..."),new Error(o);case 17:s.next=24;break;case 19:s.prev=19,s.t0=s.catch(2),this.setAlertMsg("Erro no servidor. Tente novamente..."),console.log("Erro capturado:"),console.log(s.t0);case 24:if(s.prev=24,console.log("DELETE EMOTION STATUS: Finished."),this.setState({isLoading:!1}),!n.ok){s.next=31;break}return s.next=30,E.a.awrap(this.props.route.params.syncUserData());case 30:this.updateUserData();case 31:return s.finish(24);case 32:case"end":return s.stop()}}),null,this,[[2,19,24,32]],Promise)}},{key:"fetchWeather",value:function(){var e,t,n,r=this;return E.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(o.prev=0,!this.state.userCoordinates){o.next=10;break}return console.log("FETCH WEATHER STATUS: STARTED...!"),e=this.state.userCoordinates,t=e.latitude,n=e.longitude,o.next=8,E.a.awrap(fetch("https://api.openweathermap.org/data/2.5/weather?lat="+t+"&lon="+n+"&APPID="+Ee.KEY+"&units=metric").then((function(e){var t="Status: "+e.status+", Status Text: "+e.statusText;if(e.ok)return e.json();throw new Error(t)})).then((function(e){console.log("FETCH WEATHER STATUS: SUCCESSFUL!");var t={coords:e.coord,name:e.name,weather:e.weather[0],main:e.main,clouds:e.clouds,wind:e.wind,visibility:e.visibility};r.setState({weather:t})})));case 8:o.next=11;break;case 10:console.log("FETCH WEATHER STATUS: UNABLE TO START! USER POSITION NOT AVAILABLE.");case 11:o.next=17;break;case 13:o.prev=13,o.t0=o.catch(0),console.log("FETCH WEATHER STATUS: ERROR! LOGGING ERROR..."),console.log(o.t0);case 17:return o.prev=17,console.log("FETCH WEATHER STATUS: FINISHED!"),this.setState({isFetchingLocationOrWeather:!1}),o.finish(17);case 21:case"end":return o.stop()}}),null,this,[[0,13,17,21]],Promise)}},{key:"checkIfLocationEnabled",value:function(){var e;return E.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.state.locationServiceEnabled){t.next=17;break}return t.prev=1,console.log("GEOCODING PROCESS (CHECK): CHECKING IF USER HAS SERVICES ENABLED."),t.next=5,E.a.awrap(ye.b());case 5:(e=t.sent)?(console.log("GEOCODING PROCESS (CHECK): CHECKED! USER HAS SERVICES ENABLED."),this.setState({LocationServiceEnabled:e})):(console.log("GEOCODING PROCESS (CHECK): CHECKED! USER DOES NOT HAVE SERVICES ENABLED."),alert("Location Service not enabled. Please enable your location services.")),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log("GEOCODING PROCESS (CHECK): ERROR IN SERVICES PERMISSION CHECK! COULD'NT CHECK IF USER HAS SERVICES ENABLED.");case 12:return t.prev=12,console.log("GEOCODING PROCESS (CHECK): FINISHED!"),t.finish(12);case 15:t.next=18;break;case 17:console.log("GEOCODING PROCESS (CHECK): SKIPPING! USER ALREADY HAS SERVICES ENABLED.");case 18:case"end":return t.stop()}}),null,this,[[1,9,12,15]],Promise)}},{key:"getCurrentLocation",value:function(){var e,t,n,r,o,s;return E.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,console.log("GEOCODING PROCESS (PERMISSION): REQUEST PERMISSION ASYNC..."),a.next=4,E.a.awrap(ye.c());case 4:return e=a.sent,"granted"!==e.status?(console.log("GEOCODING PROCESS (PERMISSION): PERMISSION NOT GRANTED!"),alert("Permission not granted. Allow the app to use location service.")):console.log("GEOCODING PROCESS (PERMISSION): PERMISSION GRANTED!"),console.log("GEOCODING PROCESS (REQUEST): GETTING CURRENT USER POSITION ASYNC..."),a.next=10,E.a.awrap(ye.a());case 10:if(t=a.sent,!(n=t.coords)){a.next=23;break}return r=n.latitude,o=n.longitude,this.setState({userCoordinates:n}),console.log("GEOCODING PROCESS (REQUEST): CURRENT USER POSITION FOUND... Latitude: "+r+", Logitude: "+o),console.log("GEOCODING PROCESS (REVERSE GEOCODING): REVERSE GEOCODE ASYNC..."),a.next=19,E.a.awrap(ye.d({latitude:r,longitude:o}));case 19:(s=a.sent)?(this.setState({address:(i=s[0],i.street+", "+i.streetNumber+" - "+i.district+", "+i.subregion+". "+i.region+", "+i.isoCountryCode+"."),location:{position:n,address:s[0]}}),console.log("GEOCODING PROCESS (REVERSE GEOCODING): REVERSE GEOCODE SUCCESSFUL! UPDATING STATE...")):(console.log("GEOCODING PROCESS (REVERSE GEOCODING): REVERSE GEOCODE FAILED! LOGGING RESPONSE..."),console.log(s)),a.next=24;break;case 23:console.log("GEOCODING PROCESS (REVERSE GEOCODING): USER POSITION NOT FOUND! UNABLE TO PROCEED TO REVERSE GEOCODING...");case 24:a.next=30;break;case 26:a.prev=26,a.t0=a.catch(0),console.log("GEOCODING PROCESS: ERROR IN USER POSITION REQUEST! LOGGING ERROR..."),console.log(a.t0);case 30:return a.prev=30,console.log("GEOCODING PROCESS: USER POSITION REQUEST FINISHED. PROCEEDING TO FETCH WEATHER DATA..."),a.finish(30);case 33:case"end":return a.stop()}var i}),null,this,[[0,26,30,33]],Promise)}},{key:"render",value:function(){return Object(U.jsxs)(O.a,{source:n(110),style:ue.mainView,children:[Object(U.jsx)(x.a,{style:ue.scrollView,children:Object(U.jsxs)(S.a,{style:ue.section,children:[this.postEntryHeader(),this.InputCard("Avalia\xe7\xe3o","smiling-face",{justifyContent:"space-between"},this.MoodButtons()),this.InputCard("Emo\xe7\xf5es","checkmark-square-outline",{flexWrap:"wrap",justifyContent:"center"},this.EmotionButtons),this.InputCard("Jornal","book",{flexDirection:"column",minHeight:130},this.JornalInput())]})}),Object(U.jsx)(this.saveButton,{}),this.loginMsg()]})}}]),r}(f.Component),He={login:{mainView:{flex:1,justifyContent:"center",alignItems:"center"},titleView:{flexDirection:"row",justifyContent:"center",alignItems:"center",minHeight:60},title:{fontSize:30,fontWeight:"bold",color:"white",alignSelf:"center"},titleIcon:{width:30,height:30,marginLeft:6,paddingTop:3},card:{height:"55%",minHeight:390,width:350,paddingHorizontal:10,paddingVertical:10,borderWidth:1,borderRadius:10,backgroundColor:"azure"},cardHeader:{height:"25%",width:"100%"},cardTitle:{position:"relative",top:"30%",left:"5%",fontSize:24,fontWeight:"bold",color:"black"},cardSection:{height:"25%",justifyContent:"space-evenly",alignItems:"center"},loadingIcon:{alignSelf:"center"},inputField:{minHeight:40,width:"100%",paddingLeft:10,fontSize:14,borderWidth:1,borderRadius:5,backgroundColor:"white"},button:{height:40,width:"100%",textAlign:"center",alignItems:"center",justifyContent:"center",borderWidth:1,borderRadius:5,borderColor:"white",backgroundColor:"lightblue"},buttonLabel:{fontSize:15,fontWeight:"bold",color:"black"},text:{fontSize:15,textAlign:"center"},msgBox:{width:300,height:36,justifyContent:"center",backgroundColor:"rgb(30,30,30)",borderWidth:1,borderColor:"rgb(40,40,40)"},msg:{textAlign:"center",color:"white"}}};function Ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(n),!0).forEach((function(t){I()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function We(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var o=p()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h()(this,n)}}function Je(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Ye(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ye(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ke=n(692),qe="web"==P.a.OS?"https://morning-journey-78874.herokuapp.com/":"",Qe=["validateDNS","checkCatchAll","checkFree","checkDisposable"];function _e(e,t,n){for(var r,o=Je(t);!(r=o()).done;){e+="&"+r.value+"="+n}return e}function $e(e){var t,n,r,o;return E.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return console.log("EMAIL VERIFICATION STATUS: Fetching email verification api..."),s.prev=1,t=_e(t="https://emailverification.whoisxmlapi.com/api/v2?apiKey=at_TPKXmSQnStekLzTbstLO9GyHvd7or&emailAddress="+e,Qe,"0"),n={ok:!1,status:"Email n\xe3o verificado."},s.next=7,E.a.awrap(fetch(t,{method:"GET"}));case 7:if(!(r=s.sent).ok){s.next=17;break}return console.log("EMAIL VERIFICATION STATUS: Api fetch request successful."),s.next=12,E.a.awrap(r.json());case 12:return"false"==(o=s.sent).formatCheck?n.status="Email inv\xe1lido.":"false"==o.smtpCheck?n.status="Email n\xe3o existe.":n={ok:!0,status:"Email v\xe1lido."},s.abrupt("return",n);case 17:throw console.log("EMAIL VERIFICATION STATUS: Api fetch request failed. Throwing error..."),new Error("Status: "+r.status+", Status Text: "+r.statusText);case 19:return s.prev=19,console.log("EMAIL VERIFICATION STATUS: Conclu\xeddo"),s.finish(19);case 22:case"end":return s.stop()}}),null,null,[[1,,19,22]],Promise)}var Xe=function(e){u()(r,e);var t=We(r);function r(e){var s;return o()(this,r),(s=t.call(this,e)).LoginScreen=function(){return Object(U.jsxs)(O.a,{source:n(110),style:[He.login.mainView,{justifyContent:"space-evenly"}],children:[Object(U.jsx)(S.a,{style:He.login.titleView,children:Object(U.jsx)(j.a,{style:He.login.title,children:"Mood Tracker"})}),Object(U.jsxs)(S.a,{style:He.login.card,children:[Object(U.jsx)(S.a,{style:He.login.cardHeader,children:Object(U.jsx)(j.a,{style:He.login.cardTitle,children:"Entrar"})}),Object(U.jsxs)(S.a,{style:He.login.cardSection,children:[Object(U.jsx)(ie.a,{placeholder:"Email",textContentType:"emailAddress",style:He.login.inputField,onChangeText:s.onChangeText("email"),autoComplete:"email",importantForAutofill:"yes"}),Object(U.jsx)(ie.a,{placeholder:"Senha",textContentType:"password",secureTextEntry:!0,style:He.login.inputField,onChangeText:s.onChangeText("password"),autoComplete:"password",importantForAutofill:"yes"})]}),Object(U.jsxs)(S.a,{style:He.login.cardSection,children:[s.submitButton("signin"),s.submitButton("signup")]}),Object(U.jsx)(S.a,{style:[He.login.cardSection],children:s.LoginIcon()})]}),s.loginMsg()]})},s.state={userInfo:{password:"",email:"",username:""},loginMsg:"",isUserAuth:!1,isDataLoading:!1},s.onChangeText=s.onChangeText.bind(c()(s)),s.submitButton=s.submitButton.bind(c()(s)),s.loginMsg=s.loginMsg.bind(c()(s)),s.setLoginMsg=s.setLoginMsg.bind(c()(s)),s.onSignIn=s.onSignIn.bind(c()(s)),s.onSignUp=s.onSignUp.bind(c()(s)),s}return a()(r,[{key:"LoginIcon",value:function(){return this.state.isDataLoading?Object(U.jsx)(ce.a,{color:"#000000"}):Object(U.jsx)(T.Icon,{name:"log-in-outline",animation:"pulse",fill:"#000",width:30,height:30})}},{key:"setLoginMsg",value:function(e){var t=this;this.setState({loginMsg:e}),setTimeout((function(){return t.setState({loginMsg:""})}),5e3)}},{key:"loginMsg",value:function(){return Object(U.jsx)(S.a,{style:[He.login.msgBox,this.state.loginMsg?{}:{backgroundColor:"transparent",borderColor:"transparent"}],children:Object(U.jsx)(j.a,{style:He.login.msg,children:this.state.loginMsg})})}},{key:"onChangeText",value:function(e){function t(t){this.setState({userInfo:Fe(Fe({},this.state.userInfo),{},I()({},e,t))})}return t=t.bind(this)}},{key:"submitButton",value:function(e){var t="signin"==e;return Object(U.jsx)(v.a,{disabled:this.state.isDataLoading,onPress:t?this.onSignIn:this.onSignUp,style:[He.login.button],children:Object(U.jsx)(j.a,{style:He.login.buttonLabel,children:t?"Entrar":"Cadastrar"})})}},{key:"isInputEmpty",value:function(){if(this.state.userInfo.email){if(this.state.userInfo.password)return!1;return this.setLoginMsg("Insira uma senha."),console.log("SIGNIN STATUS: Insira uma senha."),!0}var e="Insira um endere\xe7o de email.";return this.setLoginMsg(e),console.log("SIGNIN STATUS: "+e),!0}},{key:"onSignIn",value:function(){var e,t,n,r,o;return E.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(console.log("SIGNIN STATUS: Started..."),e=this.state.userInfo,this.setState({isDataLoading:!0}),s.prev=3,!this.isInputEmpty()){s.next=6;break}return s.abrupt("return");case 6:return s.next=8,E.a.awrap(fetch(qe+"https://mood-tracker-server.herokuapp.com/Users",{method:"GET"}));case 8:if(t=s.sent,n="Status: "+t.status+", Status Text: "+t.statusText,!t.ok){s.next=15;break}console.log("fetch GET request for users data at signin successful."),console.log(n),s.next=19;break;case 15:throw console.log("fetch GET request for users data at signin failed. Printing fetch response..."),console.log(JSON.stringify(t)),console.log("Throwing error..."),new Error(n);case 19:return s.next=21,E.a.awrap(t.json());case 21:r=s.sent,(o=r.filter((function(t){return t.email===e.email}))[0])?o.password===e.password?(this.setState({isUserAuth:!0,userInfo:o}),"Login realizado com sucesso!",this.setLoginMsg("Login realizado com sucesso!"),console.log("SIGNIN STATUS: Sucesso.")):("Senha incorreta.",this.setLoginMsg("Senha incorreta."),console.log("SIGNIN STATUS: Senha incorreta.")):("Email n\xe3o cadastrado!",this.setLoginMsg("Email n\xe3o cadastrado!"),console.log("SIGNIN STATUS: Email n\xe3o cadastrado!")),s.next=33;break;case 26:s.prev=26,s.t0=s.catch(3),"Erro no servidor! Tente novamente...",this.setLoginMsg("Erro no servidor! Tente novamente..."),console.log("Error catched in fetch GET request for users data at signin. Printing Error..."),console.log("SIGNIN STATUS:Erro capturado. Imprimindo erro..."),console.log(s.t0);case 33:return s.prev=33,this.setState({isDataLoading:!1}),console.log("SIGNIN STATUS: Concluido."),this.state.isUserAuth&&this.props.authUser(this.state.userInfo),s.finish(33);case 38:case"end":return s.stop()}}),null,this,[[3,26,33,38]],Promise)}},{key:"onSignUp",value:function(){var e,t,n,r,o,s,a,i,c,l,u;return E.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:if(console.log("SIGNUP STATUS: started..."),e=this.state.userInfo,this.setState({isDataLoading:!0}),d.prev=3,t={ok:!1},!this.isInputEmpty()){d.next=7;break}return d.abrupt("return");case 7:return d.next=9,E.a.awrap($e(e.email));case 9:if(n=d.sent,console.log("SING UP STATUS: "+n.status),n.ok){d.next=14;break}return this.setLoginMsg(n.status),d.abrupt("return");case 14:return d.next=16,E.a.awrap(fetch(qe+"https://mood-tracker-server.herokuapp.com/Users",{method:"GET"}));case 16:if(r=d.sent,o="Status: "+r.status+", "+r.statusText,!r.ok){d.next=23;break}console.log("fetch GET request for users data at signup successful."),console.log(o),d.next=25;break;case 23:throw console.log("fetch GET request for users data at signup failed. Throwing error..."),new Error(o);case 25:return d.next=27,E.a.awrap(r.json());case 27:if(s=d.sent,s.filter((function(t){return t.email===e.email}))[0]){d.next=53;break}if(h=e.password,console.log("VALIDATING PASSWORD FOR SIGNUP..."),(a=h.length>6?{ok:!0,status:"Senha v\xe1lida."}:{ok:!1,status:"A senha deve ter no m\xednimo 6 caract\xe9res."}).ok){d.next=35;break}return console.log("SING UP STATUS: "+a.status),this.setLoginMsg(a.status),d.abrupt("return");case 35:return e.username=e.email.split("@")[0],i={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Fe(Fe({},e),{},{emotions:Ke,entries:[]}))},d.next=39,E.a.awrap(fetch(qe+"https://mood-tracker-server.herokuapp.com/Users/"+e.username,i));case 39:if(t=d.sent,c="Status: "+t.status+", "+t.statusText,!t.ok){d.next=49;break}l="Cadastro realizado com sucesso!",this.setLoginMsg(l),console.log("fetch POST request for user data at signup successful."),console.log(c),console.log("SING UP STATUS: "+l),d.next=51;break;case 49:throw console.log("fetch POST request for user data at signup failed. Throwing error..."),new Error(c);case 51:d.next=56;break;case 53:u="Email j\xe1 cadastrado.",this.setLoginMsg(u),console.log("SING UP STATUS: "+u);case 56:d.next=64;break;case 58:d.prev=58,d.t0=d.catch(3),"Erro no servidor, tente novamente...",this.setLoginMsg("Erro no servidor, tente novamente..."),console.log("SING UP STATUS: Erro capturado. Imprimindo erro..."),console.log(d.t0);case 64:return d.prev=64,this.setState({isDataLoading:!1}),console.log("SING UP STATUS: Concluido."),t.ok&&this.onSignIn(),d.finish(64);case 69:case"end":return d.stop()}var h}),null,this,[[3,58,64,69]],Promise)}},{key:"render",value:function(){return this.LoginScreen()}}]),r}(f.Component);function Ze(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var o=p()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h()(this,n)}}var et=Object(y.a)(),tt=function(e){return Object(U.jsxs)(et.Navigator,{initialRouteName:"Entrances",screenOptions:{headerShown:!1},children:[Object(U.jsx)(et.Screen,{name:"Entrances",component:oe,options:{title:"Suas entradas"},initialParams:{user:e.user}}),Object(U.jsx)(et.Screen,{name:"PostEntrance",component:ze,options:{title:"Adicione uma  entrada"},initialParams:{user:e.user}})]})},nt=function(e){u()(n,e);var t=Ze(n);function n(e){var r;return o()(this,n),(r=t.call(this,e)).state={isUserAuth:!1,user:null},r.authUser=r.authUser.bind(c()(r)),r}return a()(n,[{key:"authUser",value:function(e){console.log('User authenticated. Navigating to "HomeScreen"...'),this.setState({isUserAuth:!0,user:e})}},{key:"render",value:function(){return this.state.isUserAuth?Object(U.jsx)(b.a,{children:Object(U.jsx)(tt,{user:this.state.user})}):Object(U.jsx)(Xe,{authUser:this.authUser})}}]),n}(f.Component)},171:function(e,t,n){e.exports=n(701)},692:function(e,t,n){var r=n(16);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}for(var s,a,i,c=[["Al\xedvio","Calma","Conforto","Despreocupa\xe7\xe3o","Inspira\xe7\xe3o","Orgulho","Paz","Relaxamento","Satisfa\xe7\xe3o","Seguran\xe7a","Criatividade"].sort(),["Anima\xe7\xe3o","Concentra\xe7\xe3o","Desinibi\xe7\xe3o","Motiva\xe7\xe3o","Euforia"].sort(),["Depress\xe3o","Timidez","Cansa\xe7o","Tristeza","Confus\xe3o","Desanimo","Inseguran\xe7a","Solid\xe3o","T\xe9dio"].sort(),["Inquieta\xe7\xe3o","Ansiedade","Desespero","Frustra\xe7\xe3o","Insatisfa\xe7\xe3o","Irrita\xe7\xe3o","Medo","Vergonha","Preocupa\xe7\xe3o","Impaci\xeancia","Sobrecarregado(a)","Tens\xe3o"].sort()],l=["Positiva","Negativa"],u=["Calmo(a)","Energizado(a)"],d=[],h=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}([].concat(r(c[0]),r(c[1]),r(c[2]),r(c[3])));!(i=h()).done;){var g=i.value;s=c[0].includes(g)||c[1].includes(g)?l[0]:l[1],a=c[0].includes(g)||c[2].includes(g)?u[0]:u[1],d.push({name:g,type:s,energy:a})}e.exports=d}},[[171,1,2]]]);
//# sourceMappingURL=app.455e5e80.chunk.js.map